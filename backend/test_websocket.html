<!DOCTYPE html>
<html>
<head>
    <title>MacroMind WebSocket Test</title>
    <style>
        .message { margin: 10px; padding: 10px; border: 1px solid #ccc; }
        .error { color: red; }
    </style>
</head>
<body>
    <h2>MacroMind WebSocket Test</h2>
    <input type="text" id="symbol" value="AAPL" placeholder="Enter symbol">
    <button onclick="connect()">Connect</button>
    <button onclick="disconnect()">Disconnect</button>
    <div id="messages"></div>

    <script>
        let ws;
        function connect() {
            const symbol = document.getElementById('symbol').value;
            ws = new WebSocket(`ws://localhost:8000/ws/${symbol}`);
            
            // Add connection status handlers
            ws.onopen = function() {
                console.log('Connected to WebSocket');
                const messagesDiv = document.getElementById('messages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.textContent = 'Connected to WebSocket';
                messagesDiv.insertBefore(messageDiv, messagesDiv.firstChild);
            };

            ws.onclose = function() {
                console.log('Disconnected from WebSocket');
                const messagesDiv = document.getElementById('messages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message error';
                messageDiv.textContent = 'Disconnected from WebSocket';
                messagesDiv.insertBefore(messageDiv, messagesDiv.firstChild);
            };
        }

        function disconnect() {
            if (ws) {
                ws.close();
                ws = null;
            }
        }
    </script>
</body>
</html>
